sudo apt-get update
sudo apt-get install -y docker.io
sudo systemctl start docker
sudo systemctl enable docker

sudo usermod -aG docker $USER
newgrp docker
docker --version


#use you GitHub username if you are using github for storing your docker images
docker login ghcr.io -u yourusername
docker pull ghcr.io/yourusername/imagename:latest


#Create .env file on EC2
nano .env
GOOGLE_API_KEY=AIasdasd

Save and exit (Ctrl+X, then Y, then Enter)


docker run -d \
  --name ai_system \
  --restart unless-stopped \
  --env-file .env \
  -p 8000:8000 \
  ghcr.io/hamadkhan345/ai_system:latest

  ############## changes to code and updation on aws

# In your project directory, build the updated image
docker build -t ghcr.io/hamadkhan345/ai_system:latest .

# Push the updated image to GitHub Container Registry
docker push ghcr.io/hamadkhan345/ai_system:latest


# ON AWS
# Stop and remove the old container
docker stop ai_system
docker rm ai_system

# Pull the latest image
docker pull ghcr.io/hamadkhan345/ai_system:latest

# Run the new container with the same settings
docker run -d \
  --name ai_system \
  --restart unless-stopped \
  --env-file .env \
  -p 8000:8000 \
  ghcr.io/hamadkhan345/ai_system:latest
